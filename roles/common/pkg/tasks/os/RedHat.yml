---

- name: Install EPEL release package
  raw: rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
  register: epel
  changed_when: >
    epel|succeeded and 'is already installed' not in epel.stdout
  ignore_errors: yes
  tags: [ epel, public_repos ]

- name: Install Python 2.7
  raw: yum -y install python
  register: python
  changed_when: >
    python|succeeded and 'already installed and latest version' not in python.stdout

- name: Install pip
  raw: command -v pip || yum -y install python-pip
  register: pip
  changed_when: >
    pip|succeeded and 'already installed and latest version' not in pip.stdout and
    not pip.stdout.endswith('/pip')

- name: Install Boto
  raw: yum -y install python-boto
  register: boto
  changed_when: >
    boto|succeeded and 'already installed and latest version' not in boto.stdout
