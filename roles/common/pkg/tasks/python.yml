---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

# Install AWS-related Python modules.
#
# We could make this conditional, but it can't be as simple as checking
# if ec2_id is defined, because a non-EC2 member of a cluster with EC2
# instances may also need awscli.

- include_tasks:
    file: python-aws.yml
    apply:
      tags: python-aws
  when: 
    groups[cluster_tag]|map('extract', hostvars, 'platform')|select('equalto', 'aws')|list is not empty
  tags: always
