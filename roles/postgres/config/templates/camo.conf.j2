{# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com> #}
# Please do not edit this file. Your changes will be overwritten. Put
# your configuration overrides into conf.d/9999-override.conf instead.

{# https://documentation.2ndquadrant.com/bdr3-enterprise/release/latest/camo/ #}
{% if bdr_node_camo_partner is defined %}
{%   if bdr_version_num < 30703 %}
report_transaction_id = true
{%   endif %}
synchronous_replication_availability = {{ synchronous_replication_availability|default('async') }}
{% if bdr_version_num >= 30504 %}
synchronous_commit = {{ synchronous_commit|default('on') }}
bdr.camo_origin_for = '{{ bdr_database }}:{{ hostvars[bdr_node_camo_partner].bdr_node_name }}'
bdr.camo_partner_of = '{{ bdr_database }}:{{ hostvars[bdr_node_camo_partner].bdr_node_name }}'
{%   if bdr_version_num < 30703 %}
pg2q.enable_camo = on
{%   else %}
bdr.enable_camo = on
{%   endif %}
{% else %}
synchronous_commit = {{ synchronous_commit|default('remote_apply') }}
synchronous_standby_names = 'bdr_{{ bdr_database }}_{{ bdr_node_group }}_{{ bdr_node_name }}_{{ hostvars[bdr_node_camo_partner].bdr_node_name }}'
synchronous_replication_timing = {{ synchronous_replication_timing|default('remote_first') }}
{% endif %}
{% endif %}
