{# Â© Copyright EnterpriseDB UK Limited 2015-2025 - All rights reserved. #}
# Please do not edit this file. Your changes will be overwritten. Put
# your configuration overrides into conf.d/9999-override.conf instead.

{% if bdr_node_camo_partner is defined %}
synchronous_replication_availability = {{ synchronous_replication_availability|default('async') }}
synchronous_commit = {{ synchronous_commit|default('on') }}
{%   if bdr_version_num is defined and bdr_version_num < 40000 %}
bdr.camo_origin_for = '{{ bdr_database }}:{{ hostvars[bdr_node_camo_partner].bdr_node_name }}'
bdr.camo_partner_of = '{{ bdr_database }}:{{ hostvars[bdr_node_camo_partner].bdr_node_name }}'
{%   endif %}
{%   if bdr_version_num is defined and bdr_version_num < 30703 %}
report_transaction_id = true
pg2q.enable_camo = {{ enable_camo }}
{%   elif bdr_version is version('5', '<') %}
bdr.enable_camo = {{ enable_camo }}
{%   endif %}
{%   if bdr_version_num is defined and bdr_version_num >= 40000 %}
# Disable transaction streaming which is not supported in combination
# with CAMO protected transactions.
bdr.default_streaming_mode = off
{%   endif %}
{% endif %}
