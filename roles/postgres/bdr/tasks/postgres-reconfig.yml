---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- name: Reset Postgres service end state
  set_fact:
    postgres_service_end_state: started

- name: Install BDR-specific configuration file
  include_role: name=postgres/config tasks_from=bdr.yml
  when:
    bdr_node_camo_partner is not defined and
    (synchronous_commit is defined or synchronous_standby_names is defined)

- name: Install CAMO-specific configuration file
  include_role: name=postgres/config tasks_from=camo.yml
  when: bdr_node_camo_partner is defined

- include_role: name=postgres/restart
  tags: always
