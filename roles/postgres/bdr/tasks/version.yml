---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- action: set_fact
  args: >
    {{
      ('{"bdr_version_num": %s, "bdr_major_version": %s}' % (
        cluster_facts.databases[bdr_database].bdr.bdr_version_num,
        cluster_facts.databases[bdr_database].bdr.bdr_major_version,
      ))|from_json
    }}
  tags: always

- assert:
    msg: "Unsupported BDR version: {{ cluster_facts.databases[bdr_database].bdr.bdr_version }}"
    that:
      bdr_major_version in [1, 2, 3]
  tags: always
