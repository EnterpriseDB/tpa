---

- include: stop_postgres.yml
  when: postgres_cleanup

# install pglogical_output extension
- include: pglogical_ext_install_git.yml tags=pglogical_ext_install
  when: pglogical_ext_git_install

# install pglogical extension and run intra-version tests
- include: pglogical_ext_client_install_git.yml tags=pglogical_ext_client_install
  when: pglogical_ext_client_git_install

# template all needed files for the test
- include: generate_files_from_templates.yml tags=generate_files_from_templates
  when: pglogical_ext_client_git_install

- include: stop_postgres.yml
  when: postgres_cleanup

# install pglogical extension and run intra-version tests
- include: pglogical_9_5_server_9_6_client.yml tags=pglogical_cross_version_test
  when: pglogical_cross_version_test

- include: stop_postgres.yml
  when: postgres_cleanup

# install pglogical extension and run intra-version tests
- include: pglogical_9_6_server_9_5_client.yml tags=pglogical_cross_version_test
  when: pglogical_cross_version_test

- include: stop_postgres.yml
  when: postgres_cleanup
