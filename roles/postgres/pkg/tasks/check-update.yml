---

# Â© Copyright EnterpriseDB UK Limited 2015-2023 - All rights reserved.

- include_tasks: list-packages.yml
  vars:
    list_varname: _all_postgres_packages

- name: Check if we can install the latest Postgres packages
  include_role:
    name: pkg/install
  vars:
    package_list_name: "postgres packages"
    package_list: "{{ _all_postgres_packages }}"
    check_install_only: yes
    result_varname: postgres_pkg_check

- fail:
    msg: >-
      Package installation check failed: {{ postgres_pkg_check.msg }}
  when:
    postgres_pkg_check is not successful
