---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

allow_duplicates: no
dependencies:
  - role: postgres/src
    when:
      postgres_installation_source == 'src'
  - role: postgres/pkg
    when:
      postgres_installation_source == 'pkg'
  - role: postgres/user
    tags: [postgres, user]
  - role: postgres/initdb
  - role: postgres/createuser
    username: postgres
    tags: [postgres, user]
  - role: postgres/config
    when: >
      pgdata_initialised
    tags: [postgres, config]
  - role: sys/ssh
    ssh_user: "{{ postgres_user }}"
    tags: [postgres, ssh]
