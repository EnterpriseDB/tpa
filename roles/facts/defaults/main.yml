---

# Copyright © 2ndQuadrant Limited <info@2ndquadrant.com>

default_postgres_version: 11

default_postgres_user: postgres
default_barman_user: barman
default_barman_group: barman

default_postgres_home_dirs:
  Debian: /var/lib/postgresql
  RedHat: /var/lib/pgsql

default_postgres_data_dir: /opt/postgres/data

default_postgres_bin_dirs:
  Debian: "/usr/lib/postgresql/{{ postgres_version }}/bin"
  RedHat: "/usr/pgsql-{{ postgres_version }}/bin"

default_postgres_extensions:
  - pg_stat_statements
  - pg_freespacemap
  - pg_visibility
  - pageinspect
  - pgstattuple

bdr_extensions:
  - btree_gist
  - bdr

default_log_destination: syslog

default_barman_home: /var/lib/barman

default_repmgr_conf_dir: "/etc/repmgr/{{ postgres_version }}"

default_bdr_database: bdrdb
default_bdr_node_group: bdrgroup

default_postgres_install_dir: "/opt/postgres/{{ postgres_version }}"

default_haproxy_port: 5432
default_pgbouncer_port: 6432

# By default, pgbouncer will forward all connections to 127.0.0.1:5432
# (which may be either postgres or haproxy that has been configured to
# forward connections to postgres); if pgbouncer_backend is set to the
# name of some instances, its postgres_port setting will be respected.

default_pgbouncer_backend: 127.0.0.1
default_pgbouncer_backend_port: 5432

# By default, we create a single wildcard entry under [databases], which
# forwards all connections to the pgbouncer_backend defined above. To
# override this, set pgbouncer_databases to [{name: …, dsn: …}, …] to
# install whatever entries you want.

default_pgbouncer_databases:
  - name: "*"
    dsn: "host={{ pgbouncer_backend }} port={{ pgbouncer_backend_port }}"
