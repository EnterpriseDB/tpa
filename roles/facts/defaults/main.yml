---

# Copyright © 2ndQuadrant Limited <info@2ndquadrant.com>

default_postgres_version: 11

default_postgres_user: postgres
default_barman_user: barman
default_barman_group: barman

default_postgres_home_dirs:
  Debian: /var/lib/postgresql
  RedHat: /var/lib/pgsql

default_postgres_data_dir: /opt/postgres/data

default_postgres_locale: en_US.UTF-8

default_postgres_conf_files:
  config_file: postgresql.conf
  ident_file: pg_ident.conf
  hba_file: pg_hba.conf

default_postgres_bin_dirs:
  Debian: "/usr/lib/postgresql/{{ postgres_version }}/bin"
  RedHat: "/usr/pgsql-{{ postgres_version }}/bin"

default_postgres_extensions:
  - pg_stat_statements
  - pg_freespacemap
  - pg_visibility
  - pageinspect
  - pgstattuple

bdr_extensions:
  - btree_gist
  - bdr

default_postgres_users: []
default_postgres_databases: []

# These parameters are scaled according to ansible_memtotal_mb. You can
# override either the ratio or the value explicitly.

shared_buffers_ratio: 0.25
shared_buffers_mb: null
effective_cache_size_ratio: 0.5
effective_cache_size_mb: null

default_log_destination: syslog
default_max_connections: 250

default_barman_home: /var/lib/barman

default_repmgr_conf_dir: "/etc/repmgr/{{ postgres_version }}"

default_bdr_database: bdrdb
default_bdr_node_group: bdrgroup

default_postgres_install_dir: "/opt/postgres/{{ postgres_version }}"

default_haproxy_bind_address: 127.0.0.1
default_haproxy_port: 5432
default_haproxy_stats_socket: /var/lib/haproxy/stats
default_pgbouncer_port: 6432

# By default, pgbouncer will forward all connections to 127.0.0.1:5432
# (which may be either postgres or haproxy that has been configured to
# forward connections to postgres); if pgbouncer_backend is set to the
# name of some instances, its postgres_port setting will be respected,
# as will max_connections to set pgbouncer_max_client_conn.

default_pgbouncer_backend: 127.0.0.1
default_pgbouncer_backend_port: 5432
default_pgbouncer_max_client_conn: 100

# By default, we create a single wildcard entry under [databases], which
# forwards all connections to the pgbouncer_backend defined above. Set
# pgbouncer_databases to [{name: …, options: {…}}, …] to override this
# and install whatever entries you want. If left unspecified, host and
# port will be filled in with pgbouncer_backend/pgbouncer_backend_port
# under each entry's "options".

default_pgbouncer_databases:
  - name: "*"

default_build_path:
  - "{{ postgres_bin_dir }}"
  - /usr/lib64/ccache
  - /usr/lib/ccache
  - $PATH
