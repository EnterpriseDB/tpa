---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- assert:
    msg: "This test may be applied only to initialised postgres instances"
    that:
    - role|contains('postgres')
    - pgdata_initialised

- include_tasks: postgres/controldata.yml
  tags: always

- include_tasks:
    file: bdr.yml
    apply:
      tags: bdr
  when: >
    'bdr' in role
  tags: always

- include_tasks:
    file: repmgr.yml
    apply:
      tags: repmgr
  when: >
    'bdr' not in role
  tags: repmgr

- include_role:
    name: pgbench
    apply:
      tags: pgbench
  tags: pgbench
