---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- assert:
    msg: "Please define a list of haproxy_backends to use haproxy"
    that:
      - haproxy_backends is defined

- set_fact:
    haproxy_backends_need_queue_checks: "{{
      haproxy_backends|length == camo_backends|length
    }}"
  vars:
    camo_backends: "{{
      haproxy_backends|map('extract', hostvars, 'bdr_node_camo_partner')|select('defined')|list
    }}"
