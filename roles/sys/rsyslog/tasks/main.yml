---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- name: Install rsyslog package
  package: name=rsyslog state=latest
  tags: pkg

- include_role: name=sys/rsyslog/client
- include_role: name=sys/rsyslog/server
  when: >
    'log-server' in role

- name: Ensure rsyslog service is enabled on boot
  service:
    name: rsyslog
    enabled: yes

- meta: flush_handlers

- name: Restart rsyslog
  service:
    name: rsyslog
    state: "{{ rsyslog_service_end_state|default('started') }}"
