---

- include_role: name=sys/rsyslog/pkg
- include_role: name=sys/rsyslog/client
  when: log_server is defined and log_server != ''
- include_role: name=sys/rsyslog/server
  when: >
    'log-server' in role

- name: Ensure rsyslog service is enabled on boot
  service:
    name: rsyslog
    enabled: yes

- meta: flush_handlers

- name: Restart rsyslog
  service:
    name: rsyslog
    state: "{{ rsyslog_service_end_state|default('started') }}"
