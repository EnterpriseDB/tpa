---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- name: Set tpa_dir
  set_fact:
    tpa_dir: "{{ lookup('env', 'TPA_DIR') or (role_path|regex_replace('/roles/platforms/vars/*', '')) }}"

- include_role: name=selftest
  tags: prereqs

- include_tasks: ssh.yml
  when:
    ansible_connection == 'ssh'

- include_role:
    name: "platforms/{{ platform }}"

- include_role: name=platforms/common
