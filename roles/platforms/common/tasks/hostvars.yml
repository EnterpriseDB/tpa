---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- name: Set default environment
  set_fact:
    target_environment: "{{ target_environment|default({}) }}"

- name: Set ip_addresses to []
  set_fact:
    ip_addresses: []

- name: Add private_ip to the address list
  set_fact:
    ip_addresses: "{{ ip_addresses|union(['private_ip']) }}"
  when:
    private_ip is defined

- name: Add public_ip to the address list
  set_fact:
    ip_addresses: "{{ ip_addresses|union(['public_ip']) }}"
  when:
    public_ip is defined

- name: Set primary IP address
  set_fact:
    ip_address: "{{ private_ip|default(public_ip) }}"
  when:
    ip_address is not defined

- name: Set tpa_2q_repositories from twoq_repositories (compat)
  set_fact:
    tpa_2q_repositories: "{{ twoq_repositories }}"
  when:
    tpa_2q_repositories is not defined and
    twoq_repositories is defined
