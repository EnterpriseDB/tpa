- summary: >
    `primary_slot_name` added for EFM compatibility interferes with `bdr_init_physical`
  description: |
    Previously, the `primary_slot_name` configuration task runs when the
    `failover_manager` is NOT `repmgr`; both `efm` and `patroni` 
    use `pg_basebackup` which, unlike `repmgr`, does not configure a 
    `primary_slot_name` on the primary node when creating a replica.
    This is to ensure the old primary uses a physical slot for replication 
    during a switchover.
    
    However, this also caused the task to run when the `failover_manager` is `bdr`.
    When `bdr_init_physical` was used on PGD cluster nodes, initialisation failed 
    because it used a non-existent slot.

    This is fixed by conditionally running the task which configures the `primary_slot_name` 
    when the `failover_manager` is explicitly `efm` or `patroni` to avoid setting it unnecessarily.
# used during switchover to ensure the old primary uses
# a physical slot for replication
  # Possible types: notable_change, minor_change, bugfix or breaking_change
  type: bugfix
  # At least one between jira_tickets or support_tickets must be defined. You
  # can define both if you want
  # You must have at least one list item in each *_tickets section that is
  # defined
  jira_tickets:
  - TPA-712
  - TPA-825
  support_tickets:
  - RT36064
