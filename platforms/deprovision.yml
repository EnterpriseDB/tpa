---

# Decommission an already-provisioned cluster:
#
#     bin/deprovision clustername

- name: Deprovision cluster
  hosts: localhost
  tasks:
    - import_tasks: load-config.yml
      tags: always

    - import_tasks: validate.yml
      tags: always

    - import_tasks: aws/deprovision.yml
      when: >
        'aws' in cluster_platforms
      tags: aws

    - import_tasks: bare/deprovision.yml
      when: >
        'bare' in cluster_platforms
      tags: bare

    - import_tasks: common/deprovision.yml
      tags: common
