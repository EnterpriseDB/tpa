# Make that every instance has an image explicitly specified by id.

- name: Ensure that every instance has a defined alias image
  assert:
    msg: "Please set 'alias' on every instance"
    that:
      - lxd_instances|selectattr('alias','defined')|list|count == lxd_instances|count

- name: Ensure that an IP address is specified for the instance
  assert:
    msg: "LXD instances must specify an ip_address"
    that:
      item.get('ip_address')
  with_items: "{{ lxd_instances }}"
