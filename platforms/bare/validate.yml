---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- name: Ensure that an IP address is specified for the instance
  assert:
    msg: "Bare instances must specify at least one of ip_address/public_ip/private_ip"
    that:
      item.get('ip_address', item.get('public_ip', item.get('private_ip')))
  with_items: "{{ bare_instances }}"

- set_fact:
    hostname_patterns: "{{
      hostname_patterns|default({})|combine({
        'bare': '^[a-z0-9-]+(\\.[a-z0-9-]+)*$'
      })
    }}"
