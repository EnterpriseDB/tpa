---

# Copyright Â© 2ndQuadrant Limited <info@2ndquadrant.com>

- name: Ensure that an IP address is specified for the instance
  assert:
    msg: "Vagrant instances must specify an ip_address"
    that:
      item.get('ip_address')
  with_items: "{{ vagrant_instances }}"

- name: Set valid instance keys
  set_fact:
    valid_instance_keys: "{{
      valid_instance_keys|default({})|combine({
        'vagrant': instance_keys
      })
    }}"
  vars:
    instance_keys:
    - ip_address
    - image
    - memory
