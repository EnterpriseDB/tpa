---

# Given a variable name and a value, we set a top-level fact and add the
# setting to provisioning_vars and write it out to vars.json.

- name: Set provisioning variable {{ name }}
  action: set_fact
  args:
    "{{ name }}": "{{ value }}"
    provisioning_vars: "{{
      provisioning_vars|combine({name: value})
    }}"

- include_tasks: write-provisioning-vars.yml
