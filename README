Introduction
------------

This repository contains automation tools to provision, configure, and
operate PostgreSQL servers.

To provision servers on AWS EC2, first create a configuration file for
the cluster under config/, then run:

    ansible-playbook provision/aws.yml \
        --extra-vars @config/clustername-aws.yml

To deploy PostgreSQL on EC2 instances, first create a playbook under
deploy/ that pulls in the desired roles and targets the appropriate
hosts (e.g. by tags), then run:

    ansible-playbook -i inventory/ec2.py deploy/cluster.yml \
        --extra-vars @config/clustername-aws.yml

Requirements
------------

Python 2.7.x

Recent versions of PyCrypto, jinja2, and boto. Install using pip rather
than packages. (Other Python libraries may also be needed.)

Ansible 2.x
    https://github.com/2ndQuadrant/ansible
    http://docs.ansible.com/ansible/intro_installation.html

Use 2ndQuadrant/ansible in preference to ansible/ansible; the former is
tested and includes local changes not present upstream. Install Ansible
by cloning the git repository, export ANSIBLE_HOME=/path/to/clone, and
invoke ansible* through the utils/ansible* wrappers provided here.

The AWS CLI is useful and recommended, though not exactly required.
    https://aws.amazon.com/cli/
    http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ec2-cli-get-set-up.html

--
Abhijit Menon-Sen <ams@2ndQuadrant.com>
