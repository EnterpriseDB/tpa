---

- name: Run apt-get update
  raw: test -d /etc/tpa || apt-get -q -y update
  register: update
  changed_when: >
    update|succeeded and 'Reading package lists' in update.stdout

- name: Install python 2.7
  raw: apt-get -q -y install python2.7
  register: python
  changed_when: >
    python|succeeded and 'already the newest version' not in python.stdout

- name: Install pip
  raw: apt-get -q -y install python-pip
  register: pip
  changed_when: >
    pip|succeeded and 'already the newest version' not in pip.stdout
