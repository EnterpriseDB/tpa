---

cluster_name: "TestPlatforms"
cluster_tags:
  Owner: AMS
cluster_vars:
  customerId: 42
  cluster_network: 10.33.174.0/24

ec2_vpc:
  Name: Test

ec2_vpc_subnets:
  eu-west-1:
    10.33.174.0/28:
      Name: first
      az: eu-west-1a
    10.33.174.16/28:
      az: eu-west-1b

ec2_ami:
  Name: TPA-Debian-PGDG-9.6-2016*
  Owner: self
ec2_ami_user: admin

instances:

    - node: 1
      type: t2.micro
      region: eu-west-1
      subnet: 10.33.174.0/28
      volumes:
          - device_name: root
            volume_type: gp2
            volume_size: 17
            delete_on_termination: false
          - device_name: /dev/xvdb
            volume_type: gp2
            volume_size: 16
      tags:
        os: Debian
        role: primary
        Name: debian-primary
        backup: eu-barman

    - node: 2
      type: t2.micro
      region: eu-west-1
      subnet: 10.33.174.16/28
      volumes:
          - device_name: root
            volume_type: standard
            volume_size: 18
          - device_name: /dev/xvdb
            volume_type: gp2
            volume_size: 16
      tags:
        os: Debian
        role: replica
        Name: debian-replica
        upstream: debian-primary

    # RHEL-7.2_HVM_GA-20151112-x86_64-1-Hourly2-GP2

    - node: 3
      type: t2.micro
      image: ami-8b8c57f8
      region: eu-west-1
      subnet: 10.33.174.0/28
      volumes:
          - device_name: root
            volume_type: gp2
            volume_size: 10
            delete_on_termination: false
          - device_name: /dev/xvdb
            volume_type: gp2
            volume_size: 16
      tags:
        os: RedHat
        role: primary
        Name: redhat-primary
        backup: eu-barman

    - node: 4
      type: t2.micro
      image: ami-8b8c57f8
      region: eu-west-1
      subnet: 10.33.174.16/28
      volumes:
          - device_name: root
            volume_type: gp2
            volume_size: 10
          - device_name: /dev/xvdb
            volume_type: gp2
            volume_size: 16
      tags:
        os: RedHat
        role: replica
        Name: redhat-replica
        upstream: redhat-primary

    # ubuntu/images/hvm-ssd/ubuntu-xenial-16.04-amd64-server-20160627

    - node: 5
      type: t2.micro
      image: ami-a4d44ed7
      region: eu-west-1
      subnet: 10.33.174.0/28
      volumes:
          - device_name: /dev/xvdb
            volume_type: gp2
            volume_size: 16
      tags:
        os: Ubuntu
        role: primary
        Name: ubuntu-primary
        backup: eu-barman

    - node: 6
      type: t2.micro
      image: ami-a4d44ed7
      region: eu-west-1
      subnet: 10.33.174.16/28
      volumes:
          - device_name: /dev/xvdb
            volume_type: gp2
            volume_size: 16
      tags:
        os: Ubuntu
        role: replica
        upstream: ubuntu-primary

    # Another Debian node for barman.

    - node: 7
      type: t2.micro
      region: eu-west-1
      image: ami-ff0e758c
      subnet: 10.33.174.16/28
      volumes:
          - device_name: root
            volume_type: standard
            volume_size: 13
          - device_name: /dev/xvdb
            volume_type: gp2
            volume_size: 32
      tags:
        os: Debian
        role: barman,monitor,witness,log-server,openvpn-server
        Name: eu-barman
        upstream: debian-primary
