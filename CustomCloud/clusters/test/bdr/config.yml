---

# An EC2 configuration for TPA BDR cluster deployment
#
# We will be using Ubuntu 16.04 LTS 64 bit image for deployment
#
# Intended for deployment under the 2ndQuadrant AWS account.

cluster_name: "TPA_BDR"
cluster_tags:
  Name: TPA_BDR
  Owner: gulcin

cluster_rules:
 - {proto: tcp, from_port: 22, to_port: 22, cidr_ip: 0.0.0.0/0}
 - {proto: tcp, from_port: 5432, to_port: 5432, cidr_ip: 0.0.0.0/0}
 - {proto: tcp, from_port: 1194, to_port: 1194, cidr_ip: 0.0.0.0/0}
 - {proto: udp, from_port: 514, to_port: 514, cidr_ip: 10.33.67.0/24}

ec2_ami_name: "debian-jessie-amd64-hvm-2016-04-03-ebs"
ec2_ami_user: "admin"

ec2_vpc:
  Name: Test

ec2_vpc_subnets:
  us-west-1:
    10.33.67.32/28: us-west-1b
    10.33.67.112/28: us-west-1c
  eu-central-1:
    10.33.67.128/28: eu-central-1a
    10.33.67.144/28: eu-central-1a
  us-east-1:
    10.33.67.160/28: us-east-1c
    10.33.67.176/28: us-east-1c
    10.33.67.192/28: us-east-1e

instances:
    - type: t2.small
      region: us-west-1
      subnet: 10.33.67.32/28
      assign_eip: false
      volumes:
          - device_name: /dev/xvdb
            volume_type: standard
            volume_size: 10
            delete_on_termination: true
      tags:
        db: bdr
      node: 1
    - type: t2.small
      region: us-west-1
      subnet: 10.33.67.112/28
      volumes:
          - device_name: /dev/xvdb
            volume_type: standard
            volume_size: 10
            delete_on_termination: true
      tags:
        db: barman
      node: 2
    - type: t2.small
      region: eu-central-1
      subnet: 10.33.67.128/28
      volumes:
          - device_name: /dev/xvdb
            volume_type: standard
            volume_size: 10
            delete_on_termination: true
      tags:
        db: bdr
      node: 3
    - type: t2.small
      region: eu-central-1
      subnet: 10.33.67.144/28
      volumes:
          - device_name: /dev/xvdb
            volume_type: standard
            volume_size: 10
            delete_on_termination: true
      tags:
        db: barman
      node: 4
    - type: t2.small
      region: us-west-1
      subnet: 10.33.67.160/28
      volumes:
          - device_name: /dev/xvdb
            volume_type: standard
            volume_size: 10
            delete_on_termination: true
      tags:
        db: bdr
      node: 5
    - type: t2.small
      region: us-east-1
      subnet: 10.33.67.176/28
      volumes:
          - device_name: /dev/xvdb
            volume_type: standard
            volume_size: 10
            delete_on_termination: true
      tags:
        db: barman
      node: 6
    - type: t2.small
      region: us-east-1
      subnet: 10.33.67.192/28
      assign_eip: false
      volumes:
          - device_name: /dev/xvdb
            volume_type: standard
            volume_size: 10
            delete_on_termination: true
      tags:
        db: control
      node: 7
variables:
   customerid: A12345
   serviceid: B67891
