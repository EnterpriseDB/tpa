---

# An example EC2 configuration for XL cluster deployment.
#
# The image ids below are the "ubuntu/images/hvm-ssd/ubuntu-xenial-16.04-amd64-server-20160627"
# community AMI in Sydney region.
#
# Intended for deployment under the 2ndQuadrant AWS account.

cluster_name: "XLCloudTest"
cluster_tags:
  Name: XLCloudTest
  Owner: Haroon
cluster_rules:
  - proto: tcp
    from_port: 22
    to_port: 22
    cidr_ip: 0.0.0.0/0
  - proto: tcp
    from_port: 5432
    to_port: 5432
    cidr_ip: 0.0.0.0/0
  - proto: tcp
    from_port: 20000
    to_port: 20005
    cidr_ip: 0.0.0.0/0

ec2_vpc:
  Name: XLCloudTest
  cidr: 10.63.0.0/24

ec2_vpc_subnets:
  ap-southeast-2:
    10.63.0.0/26: ap-southeast-2a

instances:
    - type: d2.xlarge
      region: ap-southeast-2
      image: ami-a387afc0
      subnet: 10.63.0.0/26
      ip: 10.63.0.1
      spot_price: 0.12
      spot_wait_timeout: 1800
      spot_launch_group: xllaunchgrp
      volumes:
          - device_name: /dev/xvda
            volume_type: gp2
            volume_size: 8
            delete_on_termination: true
          - device_name: /dev/xvdb
            ephemeral: ephemeral0
          - device_name: /dev/xvdc
            ephemeral: ephemeral1
          - device_name: /dev/xvdd
            ephemeral: ephemeral2
      tags:
        node: 1
        role: gtm,coordinator
    - type: d2.xlarge
      region: ap-southeast-2
      image: ami-a387afc0
      subnet: 10.63.0.0/26
      ip: 10.63.0.2
      spot_price: 0.12
      spot_wait_timeout: 1800
      spot_launch_group: xllaunchgrp
      volumes:
          - device_name: /dev/xvda
            volume_type: gp2
            volume_size: 8
            delete_on_termination: true
          - device_name: /dev/xvdb
            ephemeral: ephemeral0
          - device_name: /dev/xvdc
            ephemeral: ephemeral1
          - device_name: /dev/xvdd
            ephemeral: ephemeral2
      tags:
        node: 2
        role: datanode
    - type: d2.xlarge
      region: ap-southeast-2
      image: ami-a387afc0
      subnet: 10.63.0.0/26
      ip: 10.63.0.3
      spot_price: 0.12
      spot_wait_timeout: 1800
      spot_launch_group: xllaunchgrp
      volumes:
          - device_name: /dev/xvda
            volume_type: gp2
            volume_size: 8
            delete_on_termination: true
          - device_name: /dev/xvdb
            ephemeral: ephemeral0
          - device_name: /dev/xvdc
            ephemeral: ephemeral1
          - device_name: /dev/xvdd
            ephemeral: ephemeral2
      tags:
        node: 3
        role: datanode
