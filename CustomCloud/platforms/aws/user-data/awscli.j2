{#
    If awscli is not available, install it.

    Debian and Ubuntu have an awscli package, and it's even installed by
    default on Debian, so we just use that. (We could use pip here, but
    for some reason it has 75MB or so of dependencies.)

    On RHEL, the awscli package doesn't install because of a dependency
    on python-docutils that is apparently not available by default even
    in EPEL. So we use pip to install it instead.
#}

{% if not image['name'].startswith('TPA-') %}
test -x /usr/bin/aws -o -x /usr/local/bin/aws || (
{%   if 'RHEL' in image['name'] %}
{%     include 'user-data/os/RedHat/awscli.j2' %}
{%   elif 'debian' in image['name'].lower() %}
{%     include 'user-data/os/Debian/awscli.j2' %}
{%   elif 'ubuntu' in image['name'].lower() %}
{%     include 'user-data/os/Ubuntu/awscli.j2' %}
{%   endif %}
)
{% endif %}
