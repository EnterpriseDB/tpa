[{{ cluster_tag }}]
{% for h in instance_vars %}
{{ h.Name }} ansible_host={{ h.ip_address }} node={{ h.node }} role='[{{ h.role|select("notequalto","postgres")|map("doublequote")|join(",") }}]'
{% endfor %}

[{{ cluster_tag }}:vars]
cluster_tag={{ cluster_tag }}
cluster_name={{ cluster_name }}
ansible_user={{ ec2_ami_user|default('admin') }}
ansible_port={{ cluster_ssh_port|default(22) }}
ansible_python_interpreter=/usr/bin/python2.7
ansible_ssh_private_key_file="{{ cluster_dir|relpath(playbook_dir+'/../..') }}/{{ ec2_key_file }}"
ansible_ssh_common_args="-o UserKnownHostsFile='{{ cluster_dir|relpath(playbook_dir+'/../..') }}/known_hosts'"
{% for k,v in (cluster_vars|default({})).iteritems(): %}
{{ k }}={{v}}
{% endfor %}
