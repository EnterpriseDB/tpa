---

# We load vars.json into extra_cluster_vars, and set its keys as
# top-level variables.

- name: Load extra cluster variables
  include_vars:
    file: "{{ item }}"
    name: extra_cluster_vars
  with_fileglob:
    - "{{ cluster_dir }}/vars.json"

- name: Set empty extra_cluster_vars if vars.json was not loaded
  set_fact:
    extra_cluster_vars: {}
  when: extra_cluster_vars is not defined

- name: Set facts from extra_cluster_vars
  action: set_fact
  args:
    "{{ item.key }}": "{{ item.value }}"
  with_dict: "{{ extra_cluster_vars }}"
