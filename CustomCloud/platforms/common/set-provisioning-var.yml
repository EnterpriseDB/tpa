---

# Given a variable name and a value, we set a top-level fact, but also
# add the value to provisioning_vars so that we can write it out at the
# end.

- name: Set provisioning variable {{ name }}
  action: set_fact
  args:
    "{{ name }}": "{{ value }}"
    provisioning_vars: "{{
      provisioning_vars|combine({name: value})
    }}"

- include: write-provisioning-vars.yml
