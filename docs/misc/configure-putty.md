TPAexec - PuTTY Configuration guide
===========================

In order to use PuTTY under Windows to connect via ssh to the AWS instances that were created by the TPAexec utility ***tpaexec provision***, the keys will need to be converted from the private key format (.pem) generated by Amazon EC2 to the PuTTY format (.ppk).

    # Provision the cluster
    [tpa]$ tpaexec provision <clustername>

**PuTTY** has a tool named **PuTTYgen**, which can convert keys to the required format.

------

## Key conversion

**Locate private key**

Locate the private key in the cluster directory `<clustername>` - it will be named according to the **cluster_name** variable set in **config.yml** prefixed by **id_** - e.g. if the cluster_name is set to **testenv1**, then the private key will be called **id_testenv1**.

**Save key as .pem**

Copy this file into your Windows filesystem & save it as a .pem file - in this example **id_testenv1.pem** - cut and pasting into a text file will work fine for this.

**Key conversion**

Start **PuTTYgen** and under Parameters, select appropriate Type of key to generate:

For older versions of **PuTTYgen**, select **SSH-2 RSA**; for recent versions select **RSA**

*Do not select SSH-1 (RSA)*

Now choose **Load** - in the box that says **PuTTY Private Key Files (*.ppk)** you will need to select **All Files (\*.\*)** 

Select your **.pem** file and choose **Open**, then click **OK**.

Select **Save private key** and click **Yes** to ignore the warning about saving the key without a passphrase. Make sure that the file suffix is **.ppk** and choose the same name as for the **.pem** file; in this example the filename might be **id_testenv1.ppk**

------

## **Configure PuTTY**

Start **PuTTY**, select **Session** from the **Category** window - in the **Host Name** panel, enter `<user>@<IP address>` and in the Port Panel, enter **22**

The `<user>` and `<IP address>` can be found in the `<clustername>/ssh_config` file which gets created by the **`tpaexec provision`** utility. 

In the Putty **Category** window, Select **Connection**, expand **SSH**, select **Auth**

For the panel marked ***Private key file for authentication***, click **Browse** & select the .ppk file that was saved  above, then select **Open**

In the Putty **Category** window, select **Session** again, enter a session name in **Saved Sessions**, and **Save**                                

You should now be able to connect to the AWS host via PuTTY by selecting this saved session.



------
