---

# Â© Copyright EnterpriseDB UK Limited 2015-2022 - All rights reserved.

- import_playbook: "{{ tpa_dir }}/architectures/lib/init.yml"
  vars:
    wait_for_instances: yes
  tags: always

- name: Training cluster setup
  any_errors_fatal: True
  max_fail_percentage: 0
  become_user: root
  become: true
  environment: "{{ target_environment }}"

  hosts: all
  tasks:
  - include_role: name=sys
    tags: always

  - include_role:
      name: postgres
      apply:
        tags: postgres
    when: >
      'postgres' in role
    tags: always

  - include_role: name=final
    tags: always
