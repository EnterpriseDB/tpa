{# Â© Copyright EnterpriseDB UK Limited 2015-2023 - All rights reserved. #}
---

instances:
- node: 1
  Name: {{ hostnames[1] }}
  location: 0
  role:
    - primary
  backup: {{ hostnames[3] }}

- node: 2
  Name: {{ hostnames[2] }}
  location: 0
  role:
    - replica
  upstream: {{ hostnames[1] }}

- node: 3
  Name: {{ hostnames[3] }}
  location: 0
  role:
    - barman
    - log-server
    - monitoring-server
{% if (cascaded_replicas+2) % 2 == 0 %}
{%   if failover_manager == 'efm' %}
    - efm-witness
{%   else %}
    - witness
  upstream: {{ hostnames[1] }}
{%   endif %}
{% endif %}

{% for i in range(4,4+cascaded_replicas) %}
- node: {{ i }}
  Name: {{ hostnames[i] }}
  location: 1
  role:
    - replica
  upstream: {{ hostnames[2] }}
{% endfor %}
